import{a as I,b as h}from"./DialogModal-46c0c625.js";import{_ as C}from"./PrimaryButton-5b8e2c49.js";import{_ as w}from"./SecondaryButton-8af677e6.js";import{S as V}from"./SectionBorder-a38fa604.js";import{d as g,u as b,o as c,e as d,b as u,a as e,w as n,f as p,g as a,F as E,i as F,t as o,n as S,h as l}from"./app-29e4dbf0.js";import{S as $}from"./sweetalert2.all-2b834136.js";import"./SectionTitle-8710607c.js";import"./_plugin-vue_export-helper-c27b6911.js";const L={key:0},M={class:"mt-10 sm:mt-0"},N={class:"overflow-x-auto"},K={class:"min-w-full divide-y-2 divide-gray-200 text-sm"},W=e("thead",null,[e("tr",null,[e("th",{class:"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900"}," ID "),e("th",{class:"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900"}," Remote Address "),e("th",{class:"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900"}," Status "),e("th",{class:"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900"}," Protocol "),e("th",{class:"whitespace-nowrap px-4 py-2 text-left font-medium text-gray-900 text-right"}," Action "),e("th",{class:"px-4 py-2"})])],-1),z={class:"divide-y divide-gray-200"},j={class:"whitespace-nowrap px-4 py-2 font-medium text-gray-900"},q={class:"whitespace-nowrap px-4 py-2 text-gray-700"},G={class:"whitespace-nowrap px-4 py-2 text-gray-700"},H={class:"whitespace-nowrap px-4 py-2 text-right"},J=["onClick"],O=["onClick"],Q=["onClick"],U=e("div",null," Are you sure you want to remove this tunnel? ",-1),X=e("div",null," Are you sure you want to Rebuild this tunnel? ",-1),Y={key:0},Z={key:0},ee={key:1},te={key:2},ce={__name:"List",props:{tunnels:Array},setup(k){const m=g(!1),_=g(!1),f=g(!1),R=i=>{m.value=!0,y.tunnel=i},A=i=>{f.value=!0,x.tunnel=i},P=i=>{_.value=!0,t.tunnel=i},D=()=>{f.value=!1,x.put(route("tunnel.rebuild",x.tunnel.id),{preserveScroll:!0,errorBag:"rebuildTunnel",onSuccess:()=>{x.reset(),$.fire({icon:"success",title:"Tunnel rebuild",text:"Tunnel rebuild successfully,Tunnel will be rebuild in 1 minute"})},onError:()=>{console.log(x.errors.rebuildTunnel)}})},B=()=>{m.value=!1,y.delete(route("tunnels.destroy",y.tunnel.id),{preserveScroll:!0,errorBag:"deleteTunnel",onSuccess:()=>{y.reset(),$.fire({icon:"success",title:"Tunnel deleted",text:"Tunnel deleted successfully,Tunnel will be deleted in 1 minute"})},onError:()=>{console.log(y.errors.deleteTunnel)}})},y=b({tunnel:null}),x=b({tunnel:null}),t=b({tunnel:null}),v=i=>{switch(i){case 1:return{class:"text-green-600",text:"Active"};case 2:return{class:"text-yellow-600",text:"Waiting Create"};case 3:return{class:"text-yellow-600",text:"Rebuilding"};case 4:return{class:"text-yellow-600",text:"Create Error(Waiting Retry)"};case 5:return{class:"text-red-600",text:"IP Changed"};case 6:return{class:"text-red-600",text:"Error"};case 7:return{class:"text-red-600",text:"Deleting"}}};return(i,r)=>k.tunnels.length>0?(c(),d("div",L,[u(V),e("div",M,[u(I,null,{title:n(()=>[a(" Manage Tunnels ")]),description:n(()=>[]),content:n(()=>[e("div",N,[e("table",K,[W,e("tbody",z,[(c(!0),d(E,null,F(k.tunnels,s=>(c(),d("tr",{key:s.id},[e("td",j,o(s.id),1),e("td",q,o(s.remote),1),e("td",{class:S(["whitespace-nowrap px-4 py-2",v(s.status).class])},o(v(s.status).text),3),e("td",G,o(s.mode),1),e("td",H,[e("button",{class:"cursor-pointer ml-6 text-sm text-blue-500",onClick:T=>P(s)}," Detail ",8,J),e("button",{class:"cursor-pointer ml-6 text-sm text-warning",onClick:T=>A(s)}," Rebuild ",8,O),s.status!==7?(c(),d("button",{key:0,class:"cursor-pointer ml-6 text-sm text-red-500",onClick:T=>R(s)}," Delete ",8,Q)):p("",!0)])]))),128))])])])]),_:1})]),u(h,{show:m.value,onClose:r[1]||(r[1]=s=>m.value=!1)},{title:n(()=>[a(" Remove Tunnel ")]),content:n(()=>[U]),footer:n(()=>[u(C,{onClick:B},{default:n(()=>[a(" Remove ")]),_:1}),u(w,{onClick:r[0]||(r[0]=s=>m.value=!1)},{default:n(()=>[a(" Close ")]),_:1})]),_:1},8,["show"]),u(h,{show:f.value,onClose:r[3]||(r[3]=s=>f.value=!1)},{title:n(()=>[a(" Rebuild Tunnel ")]),content:n(()=>[X]),footer:n(()=>[u(C,{onClick:D},{default:n(()=>[a(" Remove ")]),_:1}),u(w,{onClick:r[2]||(r[2]=s=>f.value=!1)},{default:n(()=>[a(" Close ")]),_:1})]),_:1},8,["show"]),u(h,{show:_.value,onClose:r[5]||(r[5]=s=>_.value=!1)},{title:n(()=>[a(" Tunnel #"+o(l(t).tunnel.id),1)]),content:n(()=>[e("div",null,[e("p",null,"Remote Address: "+o(l(t).tunnel.remote),1),e("p",null,"IPV4 Address: "+o(l(t).tunnel.ip4),1),e("p",null,"IPV6 Address: "+o(l(t).tunnel.ip6),1),e("p",null,"Server Port: "+o(l(t).tunnel.srcport),1),e("p",null,"Local Port: "+o(l(t).tunnel.dstport),1),e("p",null,"Protocol: "+o(l(t).tunnel.mode),1),e("p",null,[a("Status: "),e("span",{class:S(v(l(t).tunnel.status).class)},o(v(l(t).tunnel.status).text),3)]),e("p",null,"Created At: "+o(l(t).tunnel.created_at),1),l(t).tunnel.config?(c(),d("div",Y,[l(t).tunnel.config.local.pubkey?(c(),d("p",Z,"Local Public Key: "+o(l(t).tunnel.config.remote.pubkey),1)):p("",!0),l(t).tunnel.config.remote.pubkey?(c(),d("p",ee,"Local Privacy Key: "+o(l(t).tunnel.config.remote.privkey),1)):p("",!0),l(t).tunnel.config.local.pubkey?(c(),d("p",te,"Server Public Key: "+o(l(t).tunnel.config.local.pubkey),1)):p("",!0)])):p("",!0)])]),footer:n(()=>[u(w,{onClick:r[4]||(r[4]=s=>_.value=!1)},{default:n(()=>[a(" Close ")]),_:1})]),_:1},8,["show"])])):p("",!0)}};export{ce as default};
