import{d as v,u as P,o as r,c as k,w as u,g as c,a as l,b as a,h as s,e as d,f as _,v as V,E as I,i as h,t as g,F as x,K as U,n as $}from"./app-29e4dbf0.js";import{_ as w}from"./ActionMessage-e48ea84c.js";import{_ as B}from"./FormSection-704b3603.js";import{_ as m}from"./InputError-9857b6e5.js";import{_ as p}from"./InputLabel-45914348.js";import{_ as N}from"./PrimaryButton-5b8e2c49.js";import{_ as y}from"./TextInput-cb703895.js";import{S as M}from"./sweetalert2.all-2b834136.js";import"./SectionTitle-8710607c.js";import"./_plugin-vue_export-helper-c27b6911.js";const E={class:"col-span-6"},F={key:0,class:"col-span-6"},A={key:1,class:"col-span-6"},D={class:"col-span-6"},K=["value"],R={class:"col-span-6"},z={class:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4"},L={class:"flex items-center"},O=["onUpdate:modelValue","value"],j={class:"ml-2 text-sm text-gray-600"},ae={__name:"TunnelManager",props:{nodes:Array,availableMode:Array},setup(b){const S=()=>{e.post(route("tunnels.store"),{preserveScroll:!0,errorBag:"createTunnel",onSuccess:()=>{e.reset("remote","mode","node","pubkey","port"),displayingToken.value=!0,e.reset(),i.value=!1,n.value=!1,M.fire({icon:"success",title:"Tunnel created",text:"Tunnel created successfully, places wait 1 minute for the tunnel to be created"})},onError:()=>{e.errors.tunnel&&M.fire({icon:"error",title:"Oops...",text:e.errors.tunnel})}})},n=v(!1),i=v(!1),f=v({ip4:!1,ip6:!1}),e=P({remote:"",mode:"",node:"",pubkey:null,port:null}),T=()=>{switch(e.mode){case"wireguard":e.port=null,n.value=!0,i.value=!0,f.value={ip4:!0,ip6:!0};break;case"vxlan":e.port=4789,n.value=!0,i.value=!1,f.value={ip4:!0,ip6:!0};break;case"gre":case"ip6gre":case"sit":n.value=!1,i.value=!1,f.value={ip4:!0,ip6:!0};break;default:n.value=!1,i.value=!1,f.value={ip4:!1,ip6:!1};break}};return(q,o)=>(r(),k(B,{onSubmitted:S},{title:u(()=>[c(" Create Tunnel ")]),description:u(()=>[c(" Please enter your server IP and information for creating the interface. ")]),form:u(()=>[l("div",E,[a(p,{for:"remote",value:"Remote IP"}),a(y,{id:"remote",modelValue:s(e).remote,"onUpdate:modelValue":o[0]||(o[0]=t=>s(e).remote=t),modelModifiers:{trim:!0},type:"text",class:"mt-1 block w-full",autofocus:""},null,8,["modelValue"]),a(m,{message:s(e).errors.remote,class:"mt-2"},null,8,["message"])]),i.value?(r(),d("div",F,[a(p,{for:"pubkey",value:"Pubkey"}),a(y,{id:"pubkey",modelValue:s(e).pubkey,"onUpdate:modelValue":o[1]||(o[1]=t=>s(e).pubkey=t),modelModifiers:{trim:!0},type:"text",class:"mt-1 block w-full",autofocus:""},null,8,["modelValue"]),a(m,{message:s(e).errors.pubkey,class:"mt-2"},null,8,["message"])])):_("",!0),n.value?(r(),d("div",A,[a(p,{for:"port",value:"Port"}),a(y,{id:"port",modelValue:s(e).port,"onUpdate:modelValue":o[2]||(o[2]=t=>s(e).port=t),modelModifiers:{number:!0},type:"text",class:"mt-1 block w-full",autofocus:""},null,8,["modelValue"]),a(m,{message:s(e).errors.port,class:"mt-2"},null,8,["message"])])):_("",!0),l("div",D,[a(p,{for:"node",value:"Node"}),V(l("select",{class:"border-gray-300 w-full focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm","onUpdate:modelValue":o[3]||(o[3]=t=>s(e).node=t)},[(r(!0),d(x,null,h(b.nodes,t=>(r(),d("option",{value:t.id},g(t.title),9,K))),256))],512),[[I,s(e).node]]),a(m,{message:s(e).errors.node,class:"mt-2"},null,8,["message"])]),l("div",R,[a(p,{for:"mode",value:"Mode"}),l("div",z,[(r(!0),d(x,null,h(b.availableMode,t=>(r(),d("div",{key:t},[l("label",L,[V(l("input",{type:"radio",onChange:T,"onUpdate:modelValue":C=>s(e).mode=C,value:t},null,40,O),[[U,s(e).mode]]),l("span",j,g(t),1)])]))),128))]),a(m,{message:s(e).errors.mode,class:"mt-2"},null,8,["message"])])]),actions:u(()=>[a(w,{on:s(e).recentlySuccessful,class:"mr-3"},{default:u(()=>[c(" Created. ")]),_:1},8,["on"]),s(e).hasErrors?(r(),k(w,{key:0},{default:u(()=>[c(g(s(e).errors.toString()),1)]),_:1})):_("",!0),a(N,{class:$({"opacity-25":s(e).processing}),disabled:s(e).processing},{default:u(()=>[c(" Create ")]),_:1},8,["class","disabled"])]),_:1}))}};export{ae as default};
