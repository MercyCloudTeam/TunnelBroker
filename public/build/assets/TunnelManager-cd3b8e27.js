import{d as v,u as I,o as l,c as k,w as u,g as c,a as r,b as a,h as s,e as d,f as g,v as V,I as P,i as h,t as _,F as x,J as U,n as $}from"./app-c69a2d8c.js";import{_ as w}from"./ActionMessage-7684c8e0.js";import{_ as B}from"./FormSection-2f8aa9ac.js";import{_ as y,a as m}from"./TextInput-88d81d94.js";import{_ as p}from"./InputLabel-37767034.js";import{_ as N}from"./PrimaryButton-acdac753.js";import{S as M}from"./sweetalert2.all-cb04d188.js";import"./SectionTitle-2d96ebbc.js";import"./_plugin-vue_export-helper-c27b6911.js";const F={class:"col-span-6"},A={key:0,class:"col-span-6"},E={key:1,class:"col-span-6"},D={class:"col-span-6"},R=["value"],z={class:"col-span-6"},J={class:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4"},K={class:"flex items-center"},L=["onUpdate:modelValue","value"],O={class:"ml-2 text-sm text-gray-600"},se={__name:"TunnelManager",props:{nodes:Array,availableMode:Array},setup(b){const S=()=>{e.post(route("tunnels.store"),{preserveScroll:!0,errorBag:"createTunnel",onSuccess:()=>{e.reset("remote","mode","node","pubkey","port"),displayingToken.value=!0,e.reset(),i.value=!1,n.value=!1,M.fire({icon:"success",title:"Tunnel created",text:"Tunnel created successfully, places wait 1 minute for the tunnel to be created"})},onError:()=>{e.errors.tunnel&&M.fire({icon:"error",title:"Oops...",text:e.errors.tunnel})}})},n=v(!1),i=v(!1),f=v({ip4:!1,ip6:!1}),e=I({remote:"",mode:"",node:"",pubkey:null,port:null}),T=()=>{switch(e.mode){case"wireguard":e.port=null,n.value=!0,i.value=!0,f.value={ip4:!0,ip6:!0};break;case"vxlan":e.port=4789,n.value=!0,i.value=!1,f.value={ip4:!0,ip6:!0};break;case"gre":case"ip6gre":case"sit":n.value=!1,i.value=!1,f.value={ip4:!0,ip6:!0};break;default:n.value=!1,i.value=!1,f.value={ip4:!1,ip6:!1};break}};return(j,o)=>(l(),k(B,{onSubmitted:S},{title:u(()=>[c(" Create Tunnel ")]),description:u(()=>[c(" Please enter your server IP and information for creating the interface. ")]),form:u(()=>[r("div",F,[a(p,{for:"remote",value:"Remote IP"}),a(y,{id:"remote",modelValue:s(e).remote,"onUpdate:modelValue":o[0]||(o[0]=t=>s(e).remote=t),modelModifiers:{trim:!0},type:"text",class:"mt-1 block w-full",autofocus:""},null,8,["modelValue"]),a(m,{message:s(e).errors.remote,class:"mt-2"},null,8,["message"])]),i.value?(l(),d("div",A,[a(p,{for:"pubkey",value:"Pubkey"}),a(y,{id:"pubkey",modelValue:s(e).pubkey,"onUpdate:modelValue":o[1]||(o[1]=t=>s(e).pubkey=t),modelModifiers:{trim:!0},type:"text",class:"mt-1 block w-full",autofocus:""},null,8,["modelValue"]),a(m,{message:s(e).errors.pubkey,class:"mt-2"},null,8,["message"])])):g("",!0),n.value?(l(),d("div",E,[a(p,{for:"port",value:"Port"}),a(y,{id:"port",modelValue:s(e).port,"onUpdate:modelValue":o[2]||(o[2]=t=>s(e).port=t),modelModifiers:{number:!0},type:"text",class:"mt-1 block w-full",autofocus:""},null,8,["modelValue"]),a(m,{message:s(e).errors.port,class:"mt-2"},null,8,["message"])])):g("",!0),r("div",D,[a(p,{for:"node",value:"Node"}),V(r("select",{class:"border-gray-300 w-full focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm","onUpdate:modelValue":o[3]||(o[3]=t=>s(e).node=t)},[(l(!0),d(x,null,h(b.nodes,t=>(l(),d("option",{value:t.id},_(t.title),9,R))),256))],512),[[P,s(e).node]]),a(m,{message:s(e).errors.node,class:"mt-2"},null,8,["message"])]),r("div",z,[a(p,{for:"mode",value:"Mode"}),r("div",J,[(l(!0),d(x,null,h(b.availableMode,t=>(l(),d("div",{key:t},[r("label",K,[V(r("input",{type:"radio",onChange:T,"onUpdate:modelValue":C=>s(e).mode=C,value:t},null,40,L),[[U,s(e).mode]]),r("span",O,_(t),1)])]))),128))]),a(m,{message:s(e).errors.mode,class:"mt-2"},null,8,["message"])])]),actions:u(()=>[a(w,{on:s(e).recentlySuccessful,class:"mr-3"},{default:u(()=>[c(" Created. ")]),_:1},8,["on"]),s(e).hasErrors?(l(),k(w,{key:0},{default:u(()=>[c(_(s(e).errors.toString()),1)]),_:1})):g("",!0),a(N,{class:$({"opacity-25":s(e).processing}),disabled:s(e).processing},{default:u(()=>[c(" Create ")]),_:1},8,["class","disabled"])]),_:1}))}};export{se as default};
